<div class="question">
  <form [formGroup]="questionForm" (ngSubmit)="onSubmit()">
    <h2 class="title">اختيار فردي</h2>
    <div class="row">
      <div class="col-12 mb-1">
        <mat-form-field
          class="example-full-width mb-3 w-100"
          appearance="outline"
        >
          <mat-label>نص السؤال,,, </mat-label>
          <textarea matInput formControlName="question" required></textarea>
          <mat-error *ngIf="questionForm.get('question')?.hasError('required')">
            نص السؤال مطلوب,,,
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="choice-difficulty">
      <div class="add-choice">
        <button type="button" (click)="addChoice()">
          <span class="plus">+</span>خيار جديد
        </button>
      </div>
      <div class="">
        <mat-radio-group formControlName="difficulty">
          <mat-radio-button value="سهل">سهل</mat-radio-button>
          <mat-radio-button value="متوسط">متوسط</mat-radio-button>
          <mat-radio-button value="صعب">صعب</mat-radio-button>
        </mat-radio-group>
      </div>
    </div>

    <div
      formArrayName="choices"
      *ngFor="let choice of choices.controls; let i = index"
    >
      <div [formGroupName]="i" class="row mt-3 mb-3">
        <div class="col-9">
          <mat-form-field class="example-full-width w-75" appearance="outline">
            <mat-label>الاختيار {{ i + 1 }}</mat-label>
            <input matInput formControlName="text" required />
            <mat-error *ngIf="choice.get('text')?.hasError('required')"
              >الأجابه مطلوبه</mat-error
            >
          </mat-form-field>
        </div>
        <div class="col-3">
          <mat-radio-group formControlName="isCorrect">
            <mat-radio-button [value]="true"
              >تحديد كاجابة صحيحة</mat-radio-button
            >
          </mat-radio-group>
        </div>
      </div>
    </div>

    <div class="buttons">
      <button class="save" type="submit">حفظ كمسودة</button>
      <button class="delete" type="button">الغاء</button>
    </div>
  </form>
</div>
